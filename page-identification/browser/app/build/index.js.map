{"version":3,"file":"index.js","sources":["../node_modules/tslib/tslib.es6.js","../src/utils.ts","../src/dom.ts","../src/constants.ts","../src/pageIdentification.ts","../src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","function scriptIsHTML(script: HTMLOrSVGScriptElement): script is HTMLScriptElement {\n  return 'src' in script\n}\n\nexport function getSiteId(script: HTMLOrSVGScriptElement | null): string | null {\n  if (window.MP_SID) {\n    return window.MP_SID\n  }\n  if (!script) {\n    console.error('MP: script requires being loaded from mp source')\n    return null\n  }\n  if (!scriptIsHTML(script)) {\n    console.error('MP: mp does not support SVG scripts.')\n    return null\n  }\n\n  const url = new URL(script.src)\n  return url.searchParams.get('sid')\n}\n\nexport function getDiffFromTimestamp(time1: number, time2: number, scope: 'days' | 'hours' | 'mins'): number {\n  const timeDiff = time1 - time2\n\n  if (scope === 'days') {\n    return timeDiff / (1000 * 3600 * 24)\n  } else if (scope === 'hours') {\n    return timeDiff / (60 * 60 * 1000)\n  } else {\n    return timeDiff / (60 * 1000)\n  }\n}\n\nexport function uuidv4(): string {\n  var s4 = function () {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1)\n  }\n\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4()\n}\n\nexport function formatFieldKey(key: string): string {\n  return key.replace(/[_-]/g, '').toLocaleLowerCase()\n}\n\nexport function isValidEmail(email: string) {\n  const emailRegex = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/\n  return email.match(emailRegex)\n}\n\nexport const isChildLink = (ancestors: Element[]) => {\n  let isChildLink = false\n  for (let i = 0; i < ancestors.length; i++) {\n    const element = ancestors[i]\n    if (element.tagName == 'A') {\n      isChildLink = true\n    }\n  }\n  return isChildLink\n}\n\nexport interface toObjectInterface {\n  [key: string]: any\n}\n\nexport const toObject = (olike: toObjectInterface) => {\n  const o: toObjectInterface = {}\n  let key\n\n  for (key in olike) {\n    o[key] = olike[key]\n  }\n\n  return o\n}\n\nconst isObject = (object: object): boolean => {\n  return object != null && typeof object === 'object'\n}\n\nexport const deepEqual = (object1: toObjectInterface, object2: toObjectInterface): boolean => {\n  const keys1 = Object.keys(object1)\n  const keys2 = Object.keys(object2)\n  if (keys1.length !== keys2.length) {\n    return false\n  }\n  for (const key of keys1) {\n    const val1 = object1[key]\n    const val2 = object2[key]\n    const areObjects = isObject(val1) && isObject(val2)\n    if ((areObjects && !deepEqual(val1, val2)) || (!areObjects && val1 !== val2)) {\n      return false\n    }\n  }\n  return true\n}\n\nexport const undup = function (f: Function, cutoff?: number) {\n  cutoff = cutoff || 250\n\n  var lastInvoked = 0\n  return function () {\n    var curTime = new Date().getTime()\n    var delta = curTime - lastInvoked\n\n    if (cutoff && delta > cutoff) {\n      lastInvoked = curTime\n\n      return f.apply(null, arguments)\n    } else {\n      return undefined\n    }\n  }\n}\n\nexport const parseQueryString = (qs: string): object => {\n  const pairs: toObjectInterface = {}\n\n  if (qs.length > 0) {\n    const query = qs.charAt(0) === '?' ? qs.substring(1) : qs\n\n    if (query.length > 0) {\n      const vars = query.split('&')\n      for (let i = 0; i < vars.length; i++) {\n        if (vars[i].length > 0) {\n          const pair = vars[i].split('=')\n\n          try {\n            const name = decodeURIComponent(pair[0])\n            pairs[name] = pair.length > 1 ? decodeURIComponent(pair[1]) : 'true'\n          } catch (e) {\n            console.error(e)\n          }\n        }\n      }\n    }\n  }\n  return pairs\n}\n\nexport interface ParsedURLProps {\n  href: string | null\n  hash: string | null\n  host: string | null\n  hostname: string | null\n  pathname: string | null\n  protocol: string | null\n  query: toObjectInterface\n}\n\nexport const parseUrl = (url: string) => {\n  const link = document.createElement('a')\n  link.href = url\n  if (link.host === '') {\n    link.host = link.href\n  }\n  return {\n    href: link.href,\n    hash: link.hash,\n    host: link.host,\n    hostname: link.hostname,\n    pathname: link.pathname,\n    protocol: link.protocol,\n    query: parseQueryString(link.search),\n  }\n}\n\nexport const parseLocation = (location: Location): ParsedURLProps => {\n  return {\n    href: location.href,\n    hash: location.hash,\n    host: location.host,\n    hostname: location.hostname,\n    pathname: location.pathname,\n    protocol: location.protocol,\n    query: parseQueryString(location.search),\n  }\n}\n\nexport const isSamePage = (url1: string, url2: string) => {\n  const url1Object: ParsedURLProps = parseUrl(url1)\n  const url2Object: ParsedURLProps = parseUrl(url2)\n\n  // Ignore the hash when comparing to see if two pages represent the same resource:\n  return (\n    url1Object.protocol === url2Object.protocol &&\n    url1Object.host === url2Object.host &&\n    url1Object.pathname === url2Object.pathname &&\n    deepEqual(url1Object.query, url2Object.query)\n  )\n}\n","export const getAncestors = (node: any): Element[] => {\n  let cur = node\n  const result = []\n\n  while (cur && cur !== document.body) {\n    result.push(cur)\n    cur = cur.parentNode\n  }\n  return result\n}","export const MISC_PAGE_PROPS = {\n  formInputsOnPage: 0,\n  videosOnPage: 0,\n  contentOnPage: 0,\n  hasSidebar: false,\n  hasTopbar: false,\n  hasNavbar: false,\n}\n\nexport const PageCategoryEnum = {\n  ECOMM: 'ecomm',\n  LEAD: 'lead_gen',\n  CONTACT: 'contact_us',\n  CAREERS: 'careers',\n  BLOG: 'blog',\n  GENERAL: 'general',\n}","import {\n  DomAttributeType,\n  DomButtonMapType,\n  DomButtonType,\n  DomElementType,\n  DomFormElementType,\n  DomFormMapType,\n  DomLinkMapType,\n  DomVideoMapType,\n  PageIdPropsType, PageType, PaymentProcessorType,\n  MpUserProps,\n} from './types'\nimport { getAncestors } from './dom'\nimport {MISC_PAGE_PROPS, PageCategoryEnum} from './constants'\nimport { ParsedURLProps, parseLocation } from './utils'\n\nconst DEFAULT_PAGE = {\n  domKeywords: [],\n  urlKeywords: [],\n  category: PageCategoryEnum.GENERAL,\n  formInputsOnPage: 0,\n  videosOnPage: 0,\n  contentOnPage: 0\n}\n\nexport default class PageIdentification {\n  apiDomain: string\n  userContext: MpUserProps\n  pageType: PageType\n  pageIdProps: PageIdPropsType | null\n  url: ParsedURLProps | null\n  scripts: HTMLScriptElement[] | null\n  elements: Element[] | null\n  buttons: DomButtonMapType | null\n  forms: DomFormMapType[] | null\n  links: DomLinkMapType[] | null\n  videos: DomVideoMapType[] | null\n\n  constructor(accountSiteId: string) {\n    this.apiDomain = 'http://localhost:5000/dev'\n    this.userContext = {\n      accountSiteId: accountSiteId,\n      accountStatus: 'inactive',\n      fingerprint: null,\n      sessionId: null,\n      lastVerified: null,\n      visitorUUID: null,\n      distinctPersonId: null,\n    }\n    this.pageType = DEFAULT_PAGE\n    this.pageIdProps = null\n    this.url = null\n    this.scripts = null\n    this.elements = null\n    this.buttons = null\n    this.forms = null\n    this.links = null\n    this.videos = null\n  }\n\n  async init() {\n    console.debug('MP: Initializing Page Identification')\n\n    // Get page id props from S3\n    await this.getPageIdPropsFromS3()\n    // Check the url\n    this.url = parseLocation(document.location)\n    // Map the Dom\n    this.mapDom()\n\n    console.log({ PageIdentification: this })\n  }\n\n  isAccountActive() {\n    return this.userContext.accountStatus === 'active'\n  }\n\n  /**\n   * @function getKeywordsFromS3\n   * @description Get json object of page identification keywords and identifiers\n   */\n  async getPageIdPropsFromS3() {\n    try {\n      const response = await fetch(\"https://magic-pixel-public.s3.amazonaws.com/page_id_properties.json\")\n      const s3JsonData = await response.json()\n      this.pageIdProps = {\n        ...MISC_PAGE_PROPS,\n        ...s3JsonData\n      }\n    } catch(e) {\n      console.error(`Error fetching mp keywords: ${e}`)\n    }\n  }\n\n  /**\n   * @function getAttributes\n   * @description Create an array of the attributes on an element\n   * @param  {NamedNodeMap} attributes The attributes on an element\n   * @return {Array} The attributes on an element as an array of key/value pairs\n   */\n  getAttributes(attributes: NamedNodeMap): DomAttributeType[] {\n    const allAttributes: DomAttributeType[] = []\n    Array.prototype.map.call(attributes, function (attribute) {\n      const newAttribute: DomAttributeType = {\n        name: attribute.name,\n        value: attribute.value,\n      }\n      allAttributes.push(newAttribute)\n    })\n    return allAttributes\n  }\n\n  /**\n   * @function isTemplateElement\n   * @description Check if form is part of the page template. We are looking for unique elements per page\n   * @param  {HTMLFormElement} element The attributes on an element\n   * @return {Boolean}\n   */\n  isTemplateElement(element: Element): boolean {\n    const ancestors = getAncestors(element)\n    let isTemplateForm = false\n    ancestors.forEach((ancestor) => {\n      ['sidebar', 'topbar', 'nav', 'header'].forEach((templateKeyword) => {\n        if (ancestor.id.includes(templateKeyword)) {\n          isTemplateForm = true\n        }\n        if (ancestor.className.includes(templateKeyword)) {\n          isTemplateForm = true\n        }\n      })\n    })\n    return isTemplateForm\n  }\n\n  /**\n   * @function createElementMap\n   * @description Create an elements map of an HTMLElement\n   * @param  {HTMLElement | Element} element the HTMLElement\n   * @param  {Boolean} isSVG SVG are handled uniquely\n   * @return {DomElementType[]} attributes about the HTMLFormElement\n   */\n  createElementMap(element: HTMLElement | Element, isSVG: boolean): DomElementType[] {\n    let childNodes = []\n    if (element.childNodes && element.childNodes.length > 0) {\n      childNodes = Array.prototype.filter.call(\n        element.childNodes,\n        (node) =>\n          (node.nodeType !== 8 && node.nodeType == 1 && node.localName !== 'br') ||\n          (node.nodeType === 3 && node.textContent.trim() !== ''),\n      )\n    }\n    return childNodes.map((node): DomElementType => {\n      const id = node.id || null\n      const className = node.className || null\n      const attributes = node.nodeType !== 1 ? [] : this.getAttributes(node.attributes)\n      const content = node.childNodes && node.childNodes.length > 0 ? null : node.textContent.trim()\n      const type = node.nodeType === 3 ? 'text' : node.tagName.toLowerCase()\n      const children = this.createElementMap(node, isSVG || node.type === 'svg')\n      return {\n        id,\n        className,\n        content,\n        attributes,\n        type,\n        node,\n        children,\n        isSVG: isSVG || node.type === 'svg',\n      }\n    })\n  }\n\n  /**\n   * @function createFormElementsMap\n   * @description Create an elements map of a form HTMLFormElement\n   * @param  {HTMLButtonElement} form the HTMLFormElement\n   * @return {DomFormElementType[]} an array of form elements with attributes about the HTMLFormElement\n   */\n  createFormElementsMap(form: HTMLFormElement): DomFormElementType[] {\n    let childNodes = []\n    if (form.childNodes && form.childNodes.length > 0) {\n      childNodes = Array.prototype.filter.call(\n        form.childNodes,\n        (node) =>\n          (node.nodeType !== 8 && node.nodeType == 1 && node.localName !== 'br') ||\n          (node.nodeType === 3 && node.textContent.trim() !== ''),\n      )\n    }\n    return childNodes.map((node): DomFormElementType => {\n      const id = node.id || null\n      const className = node.className || null\n      const attributes = node.nodeType !== 1 ? [] : this.getAttributes(node.attributes)\n      const content = node.childNodes && node.childNodes.length > 0 ? null : node.textContent.trim()\n      const type = node.nodeType === 3 ? 'text' : node.tagName.toLowerCase()\n      const children = this.createFormElementsMap(node)\n      return {\n        id,\n        className,\n        content,\n        attributes,\n        type,\n        node,\n        children,\n      }\n    })\n  }\n\n  /**\n   * @function createButtonElementMap\n   * @description Create an attribute map of a HTMLButton element\n   * @param  {HTMLButtonElement} button: HTMLButton element\n   * @return {DomButtonType} attributes about the HTMLButton\n   */\n  createButtonElementMap(button: HTMLButtonElement): DomButtonType {\n    return {\n      id: button.id,\n      className: button.className,\n      content: button.textContent?.trim() || null,\n      attributes: this.getAttributes(button.attributes),\n      type: button.tagName.toLowerCase(),\n      ancestors: getAncestors(button),\n    }\n  }\n\n  /**\n   * @function createLinkElementMap\n   * @description Create an attribute map of a HTMLAnchorElement element\n   * @param  {HTMLAnchorElement} link: HTMLAnchorElement element\n   * @param  {number} index used for reference if id is not provided\n   * @return {DomLinkMapType} attributes about the HTMLAnchorElement\n   */\n  createLinkElementMap(link: HTMLAnchorElement, index: number): DomLinkMapType {\n    return {\n      id: link.id || `link-id-${index}`,\n      isTemplateElement: this.isTemplateElement(link),\n      className: link.className,\n      content: link.textContent?.trim() || null,\n      attributes: this.getAttributes(link.attributes),\n      type: link.tagName.toLowerCase(),\n    }\n  }\n\n  /**\n   * @function createDomLinkMap\n   * @description Create a list of attribute maps for each HTMLAnchorElement element\n   * @return {DomLinkMapType[]} an array of attributes about the HTMLAnchorElement\n   */\n  createDomLinkMap(): DomLinkMapType[] {\n    const links = document.querySelectorAll('a')\n    const linksMap: DomLinkMapType[] = []\n    Array.from(links).map((link, i) => {\n      const mappedLink = this.createLinkElementMap(link, i)\n      linksMap.push(mappedLink)\n    })\n    return linksMap\n  }\n\n  /**\n   * @function createDomFormMap\n   * @description Create a list of attribute maps for each HTMLFormElement element\n   * @return {DomLinkMapType[]} an array of attributes about the HTMLFormElement\n   */\n  createDomFormMap(): DomFormMapType[] {\n    const forms = document.querySelectorAll('form')\n    const formsMap: DomFormMapType[] = []\n    Array.from(forms).map((form, i) => {\n      const mappedForm = {\n        id: form.id || `form-id-${i}`,\n        isTemplateElement: this.isTemplateElement(form),\n        elements: this.createFormElementsMap(form),\n      }\n      formsMap.push(mappedForm)\n    })\n    return formsMap\n  }\n\n  /**\n   * @function createDomButtonMap\n   * @description Create a list of attribute maps for each HTMLFormElement element\n   * @return {DomLinkMapType[]} an array of attributes about the HTMLFormElement\n   */\n  createDomButtonMap(): DomButtonMapType {\n    const buttons = document.querySelectorAll('button')\n    const inputButtons = document.querySelectorAll('input[type=\"submit\"]')\n    const allButtons = Array.prototype.slice.call(buttons).concat(Array.prototype.slice.call(inputButtons))\n    const buttonsMap: any = {}\n    Array.from(allButtons).map((buttonNode, i) => {\n      const buttonMap = this.createButtonElementMap(buttonNode)\n      const buttonKey = buttonNode.id || `button-id-${i}`\n      buttonsMap[buttonKey] = buttonMap\n    })\n    return buttonsMap\n  }\n\n  /**\n   * @function createDomIFrameMap\n   * @description\n   * @return\n   */\n  createDomIFrameMap(): void {\n    const iframes = document.querySelectorAll('iframe')\n    console.log({ iframes })\n  }\n\n  /**\n   * @function createDomVideoMap\n   * @description Create a list of attribute maps for each HTMLVideoElement element\n   * @return {DomVideoMapType[]} an array of attributes about the HTMLVideoElement\n   */\n  createDomVideoMap(): DomVideoMapType[] {\n    // Search for video elements\n    const videos = document.querySelectorAll('video')\n\n    // Search for external video libraries\n    const videoJsVideos = document.querySelectorAll('video-js')\n\n    const allVideoElements = [...Array.from(videos), ...Array.from(videoJsVideos)]\n    const videosMap: DomVideoMapType[] = []\n    allVideoElements.map((video, i) => {\n      const mappedForm = {\n        id: video.id || `video-id-${i}`,\n        elements: this.createElementMap(video, false),\n      }\n      videosMap.push(mappedForm)\n    })\n    return videosMap\n  }\n\n  /**\n   * @function checkDomElementsForKeywords\n   * @description Check url object to see if it contains a keyword in the keywords array.\n   * @param {Element[]} elements: an array of element from the dom\n   * @param {string[]} keywords: array of keywords to search from\n   */\n  checkDomElementsForKeywords(elements: Element[], keywords: string[]): string[] {\n    const keywordMatches: string[] = []\n    elements.map((element) => {\n      return keywords.find((k) => {\n        if (element.textContent) {\n          const isMatch = element.textContent.toLowerCase().includes(k)\n          if (isMatch) {\n            keywordMatches.push(k)\n          }\n        }\n      })\n    })\n    return !!keywordMatches.length ? keywordMatches : []\n  }\n\n  /**\n   * @function checkUrlForKeywords\n   * @description Check url object for keywords\n   * @param {string} url: url string\n   * @param {string[]} keywords: array of keywords to search from\n   * @return {string[] | null}\n   */\n  checkUrlForKeywords(url: string, keywords: string[]): string[] {\n    return keywords.filter(k => url.includes(k))\n  }\n\n  /**\n   * @function checkForPaymentProcessorButton\n   * @description Check dom for payment processor button elements\n   */\n  checkForPaymentProcessorButton(): void {\n    const paymentProcessors = this.pageIdProps?.eCommerce.paymentProcessors\n    if (paymentProcessors) {\n      paymentProcessors.forEach((paymentProcessor: PaymentProcessorType) => {\n        if (paymentProcessor.identifier.selector == 'id') {\n          const idButton = document.getElementById(paymentProcessor.identifier.query)\n          if (idButton && this.pageType) {\n            this.pageType.paymentProcessor = paymentProcessor\n          }\n        } else if (paymentProcessor.identifier.selector == 'all') {\n          const elementButton = document.querySelector(paymentProcessor.identifier.query)\n          if (elementButton && this.pageType) {\n            this.pageType.paymentProcessor = paymentProcessor\n          }\n        }\n      })\n    }\n  }\n\n  checkForPaymentProcessorScript(): void {\n    // TODO: Check for scripts\n  }\n\n  checkForPaymentProcessor(): void {\n    this.checkForPaymentProcessorButton()\n    this.checkForPaymentProcessorScript()\n  }\n\n  /**\n   * @function isEcommPage\n   * @description Check if page is an ecomm page by checking the url and dom for\n   * ECOMM_KEYWORDS. If so, set the ecomm page flag true\n   */\n  isEcommPage(): boolean {\n    // Check for payment processor button\n    // Determine if the JS objects, scripts or methods exist.\n    // TODO: Get Clarity from Justin on this\n    this.checkForPaymentProcessor()\n\n    if (this.pageIdProps?.eCommerce.keywords && this.pageType) {\n      const keywords =  this.pageIdProps.eCommerce.keywords\n      // Does the URL contain ecommerce keywords?\n      if (this.url?.pathname) {\n        this.pageType.urlKeywords = this.checkUrlForKeywords(this.url?.pathname, keywords)\n      }\n\n      // Does the DOM contain ecommerce keywords?\n      if (this.elements) {\n        this.pageType.domKeywords = this.checkDomElementsForKeywords(this.elements, keywords)\n      }\n    }\n\n    // Check if page is an ecomm page\n    if (this.pageType && (this.pageType.paymentProcessor || this.pageType.urlKeywords.length > 0 || this.pageType.domKeywords.length > 0)) {\n      this.pageType.category = 'ecomm'\n      return true\n    } else {\n      this.pageType = DEFAULT_PAGE\n      return false\n    }\n  }\n\n  /**\n   * @function isConfirmationPage\n   * @description Check if page is a confirmation page by checking the url and dom\n   * for CONFIRMATION_KEYWORDS. If so, will set the confirmation page flag true\n   */\n  isConfirmationPage(): boolean {\n    if (this.pageIdProps?.confirmation.keywords) {\n      const keywords =  this.pageIdProps.confirmation.keywords\n      // Does the URL contain confirmation keywords?\n      if (this.url?.pathname) {\n        this.pageType.urlKeywords = this.checkUrlForKeywords(this.url?.pathname, keywords)\n      }\n\n      // Does the DOM contain confirmation keywords?\n      if (this.elements) {\n        this.pageType.domKeywords = this.checkDomElementsForKeywords(this.elements, keywords)\n      }\n    }\n\n    console.log({ pageType: this.pageType})\n\n    // Check if page is a confirmation page\n    if (this.pageType && (this.pageType.urlKeywords.length > 0 || this.pageType.domKeywords.length > 0)) {\n      this.pageType.category = 'confirmation'\n      return true\n    } else {\n      this.pageType = DEFAULT_PAGE\n      return false\n    }\n  }\n\n  /**\n   * @function isLeadGenPage\n   * @description Check if page is a lead gen page by for form email input. If so, will set the lead gen page flag true\n   */\n  isLeadGenPage() {\n    // Check if page is a lead gen page\n    const emailInput = document.querySelector('input[type=\"email\"]')\n    if (this.pageType && emailInput) {\n      this.pageType.category = 'lead_gen'\n      return true\n    } else {\n      this.pageType = DEFAULT_PAGE\n      return false\n    }\n  }\n\n  /**\n   * @function isContactUsPage\n   * @description Check if page is a contact page by checking the url and dom\n   * for CONTACT_US_KEYWORDS. If so, will set the contact page flag true\n   */\n  isContactUsPage() {\n    if (this.pageIdProps?.contactUs.keywords && this.pageType) {\n      const keywords =  this.pageIdProps.contactUs.keywords\n      // Does the URL contain contact us keywords?\n      if (this.url?.pathname) {\n        this.pageType.urlKeywords = this.checkUrlForKeywords(this.url?.pathname, keywords)\n      }\n\n      // Does the DOM contain contact us keywords?\n      if (this.elements) {\n        this.pageType.domKeywords = this.checkDomElementsForKeywords(this.elements, keywords)\n      }\n    }\n\n    // Check if page is a contact us page\n    if (this.pageType && (this.pageType.urlKeywords.length > 0 || this.pageType.domKeywords.length > 0)) {\n      this.pageType.category = 'contact_us'\n      return true\n    } else {\n      this.pageType = DEFAULT_PAGE\n      return false\n    }\n  }\n\n  /**\n   * @function isCareersPage\n   * @description Check if page is a careers' page by checking the url and dom\n   * for CAREERS_KEYWORDS. If so, will set the careers' page flag true\n   */\n  isCareersPage() {\n    if (this.pageIdProps?.careers.keywords && this.pageType) {\n      const keywords =  this.pageIdProps.careers.keywords\n      // Does the URL contain careers keywords?\n      if (this.url?.pathname) {\n        this.pageType.urlKeywords = this.checkUrlForKeywords(this.url?.pathname, keywords)\n      }\n    }\n\n    // Check if page is a contact us page\n    if (this.pageType && (this.pageType.urlKeywords.length > 0 || this.pageType.domKeywords.length > 0)) {\n      this.pageType.category = 'careers'\n      return true\n    } else {\n      this.pageType = DEFAULT_PAGE\n      return false\n    }\n  }\n\n  /**\n   * @function isBlogPage\n   * @description Check if page is a blog page by checking the url and dom\n   * for BLOG_KEYWORDS. If so, will set the blog page flag true\n   */\n  isBlogPage() {\n    if (this.pageIdProps?.blog.keywords && this.pageType) {\n      const keywords =  this.pageIdProps.blog.keywords\n      // Does the URL contain blog keywords?\n      if (this.url?.pathname) {\n        this.pageType.urlKeywords = this.checkUrlForKeywords(this.url?.pathname, keywords)\n      }\n\n      // Does the DOM contain contact us keywords?\n      if (this.elements) {\n        this.pageType.domKeywords = this.checkDomElementsForKeywords(this.elements, keywords)\n      }\n    }\n\n    // Check if page is a blog page\n    if (this.pageType && (this.pageType.urlKeywords.length > 0 || this.pageType.domKeywords.length > 0)) {\n      this.pageType.category = 'blog'\n      return true\n    } else {\n      this.pageType = DEFAULT_PAGE\n      return false\n    }\n  }\n\n  /**\n   * @function checkMiscProperties\n   * @description Check page for misc page properties. Will set general attributes\n   * on misc page id properties\n   */\n  checkMiscProperties(): void {\n    if (this.pageType) {\n      // How many form inputs are on the page?\n      const pageForms = this.forms && this.forms.filter((f) => !f.isTemplateElement)\n      this.pageType.formInputsOnPage = pageForms?.length || 0\n\n      // How many videos are on the page?\n      this.pageType.videosOnPage = this.videos?.length || 0\n\n      // How much content is on the page?\n      // TODO: Get Clarity from Justin on this\n\n      // What buttons are on the page?\n    }\n  }\n\n  /**\n   * @function mapDom\n   * @description Get and set, parsed Dom scripts and elements\n   */\n  mapDom(): void {\n    // Select all page elements\n    const docElements = document.querySelectorAll('*')\n    // Select all scripts\n    const scripts = document.querySelectorAll('script')\n    // Set DOM mapped attributes\n    this.elements = Array.from(docElements)\n    this.scripts = Array.from(scripts)\n    this.buttons = this.createDomButtonMap()\n    this.forms = this.createDomFormMap()\n    this.links = this.createDomLinkMap()\n    this.videos = this.createDomVideoMap()\n\n    // TODO: Check IFrames somehow\n    // this.createDomIFrameMap()\n    // this.iframes = domMap.iframes\n  }\n\n  // TODO: Define return type\n  async apiRequest(method: string, endpoint: string, body: object = {}): Promise<any | boolean> {\n\n    // TODO: Add better verification and validation before api requests get sent\n    try {\n      if (!this.userContext.accountSiteId) {\n        console.warn('MP: Error: Missing ids, cannot track page')\n        return false\n      }\n\n      let accountBody = {\n        ...body,\n        ...this.userContext,\n      }\n\n      const response = await fetch(`${this.apiDomain}/${endpoint}`, {\n        method: method,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(accountBody),\n      })\n      return response.json()\n    } catch (e) {\n      console.error(e)\n      return false\n    }\n  }\n\n  async trackIdentifiedPage(): Promise<boolean> {\n    try {\n      const payload = {\n        ...this.userContext,\n        ...this.pageType\n      }\n      console.log(`Track Identified Page Request Body:`, { payload })\n      // await this.apiRequest('POST', `${this.apiDomain}/'identify/page'`, payload)\n      return true\n    } catch(e) {\n      console.error(`Error tracking page: ${e}`)\n      return false\n    }\n  }\n\n  /**\n   * @function identifyPage\n   * @description Run sequence of checks to determine what page the user is on.\n   * Once identified, will call the track-page api\n   */\n   identifyPage(): void {\n    // Check for misc items on the page first\n    // These are included in every api call\n    this.checkMiscProperties()\n\n    // Check for page type\n    // Stop checking once a page has been identified\n    // TODO: Implement breakout from page check\n    const isEcommPage = this.isEcommPage()\n    console.log({ isEcommPage })\n    if (isEcommPage) {\n      this.trackIdentifiedPage()\n      return\n    }\n    this.isConfirmationPage()\n    this.isLeadGenPage()\n    this.isContactUsPage()\n    this.isBlogPage()\n    this.isCareersPage()\n  }\n}\n","import { getSiteId } from './utils'\nimport PageIdentification from './pageIdentification'\n\nconst script = document.currentScript\n\n/**\n * @function: init\n * @description: When page is ready, validates script and account status\n * before loading scribe-analytics tracking and page identification services\n */\nasync function init() {\n\n  // Get site id from script for validation\n  const siteId = getSiteId(script)\n  if (!siteId) {\n    console.error('MP: Error verifying account. No site id provided')\n    return false\n  }\n  // Create new MP class and add to window\n  const pageIdentification = new PageIdentification(siteId)\n  window.MP_PAGE_IDENTIFICATION = pageIdentification\n\n  // Initialize MP class\n  await pageIdentification.init()\n\n  // Check if account is active\n  const accountIsActive = pageIdentification.isAccountActive()\n  if (accountIsActive) {\n    console.debug('MP: Account is active.')\n    pageIdentification.identifyPage()\n  } else {\n    console.error(`MP: Account is not active for site id ${siteId}.`)\n  }\n}\n\n// Wait until all elements are on the pageIdentification from initial load\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', init)\n} else {\n  init().then(() => 'Successfully initiated Magic Pixel')\n}\n"],"names":[],"mappings":"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"}