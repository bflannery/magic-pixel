{"version":3,"file":"index.js","sources":["../node_modules/tslib/tslib.es6.js","../src/utils.ts","../src/handler.ts","../src/dom.ts","../src/eventTracker.ts","../src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","function scriptIsHTML(script: HTMLOrSVGScriptElement): script is HTMLScriptElement {\n  return 'src' in script\n}\n\nexport function getSiteId(script: HTMLOrSVGScriptElement | null): string | null {\n  if (window.MP_SID) {\n    return window.MP_SID\n  }\n  if (!script) {\n    console.error('MP: script requires being loaded from mp source')\n    return null\n  }\n  if (!scriptIsHTML(script)) {\n    console.error('MP: mp does not support SVG scripts.')\n    return null\n  }\n\n  const url = new URL(script.src)\n  return url.searchParams.get('sid')\n}\n\nexport function getDiffFromTimestamp(time1: number, time2: number, scope: 'days' | 'hours' | 'mins'): number {\n  const timeDiff = time1 - time2\n\n  if (scope === 'days') {\n    return timeDiff / (1000 * 3600 * 24)\n  } else if (scope === 'hours') {\n    return timeDiff / (60 * 60 * 1000)\n  } else {\n    return timeDiff / (60 * 1000)\n  }\n}\n\nexport function uuidv4(): string {\n  var s4 = function () {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1)\n  }\n\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4()\n}\n\nexport function formatFieldKey(key: string): string {\n  return key.replace(/[_-]/g, '').toLocaleLowerCase()\n}\n\nexport function isValidEmail(email: string) {\n  const emailRegex = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/\n  return email.match(emailRegex)\n}\n\nexport const isChildLink = (ancestors: Element[]) => {\n  let isChildLink = false\n  for (let i = 0; i < ancestors.length; i++) {\n    const element = ancestors[i]\n    if (element.tagName == 'A') {\n      isChildLink = true\n    }\n  }\n  return isChildLink\n}\n\nexport interface toObjectInterface {\n  [key: string]: any\n}\n\nexport const toObject = (olike: toObjectInterface) => {\n  const o: toObjectInterface = {}\n  let key\n\n  for (key in olike) {\n    o[key] = olike[key]\n  }\n\n  return o\n}\n\nconst isObject = (object: object): boolean => {\n  return object != null && typeof object === 'object'\n}\n\nexport const deepEqual = (object1: toObjectInterface, object2: toObjectInterface): boolean => {\n  const keys1 = Object.keys(object1)\n  const keys2 = Object.keys(object2)\n  if (keys1.length !== keys2.length) {\n    return false\n  }\n  for (const key of keys1) {\n    const val1 = object1[key]\n    const val2 = object2[key]\n    const areObjects = isObject(val1) && isObject(val2)\n    if ((areObjects && !deepEqual(val1, val2)) || (!areObjects && val1 !== val2)) {\n      return false\n    }\n  }\n  return true\n}\n\nexport const undup = function (f: Function, cutoff?: number) {\n  cutoff = cutoff || 250\n\n  var lastInvoked = 0\n  return function () {\n    var curTime = new Date().getTime()\n    var delta = curTime - lastInvoked\n\n    if (cutoff && delta > cutoff) {\n      lastInvoked = curTime\n\n      return f.apply(null, arguments)\n    } else {\n      return undefined\n    }\n  }\n}\n\nexport const parseQueryString = (qs: string): object => {\n  const pairs: toObjectInterface = {}\n\n  if (qs.length > 0) {\n    const query = qs.charAt(0) === '?' ? qs.substring(1) : qs\n\n    if (query.length > 0) {\n      const vars = query.split('&')\n      for (let i = 0; i < vars.length; i++) {\n        if (vars[i].length > 0) {\n          const pair = vars[i].split('=')\n\n          try {\n            const name = decodeURIComponent(pair[0])\n            pairs[name] = pair.length > 1 ? decodeURIComponent(pair[1]) : 'true'\n          } catch (e) {\n            console.error(e)\n          }\n        }\n      }\n    }\n  }\n  return pairs\n}\n\nexport interface ParsedURLProps {\n  href: string | null\n  hash: string | null\n  host: string | null\n  hostname: string | null\n  pathname: string | null\n  protocol: string | null\n  query: toObjectInterface\n}\n\nexport const parseUrl = (url: string) => {\n  const link = document.createElement('a')\n  link.href = url\n  if (link.host === '') {\n    link.host = link.href\n  }\n  return {\n    href: link.href,\n    hash: link.hash,\n    host: link.host,\n    hostname: link.hostname,\n    pathname: link.pathname,\n    protocol: link.protocol,\n    query: parseQueryString(link.search),\n  }\n}\n\nexport const parseLocation = (location: Location): ParsedURLProps => {\n  return {\n    href: location.href,\n    hash: location.hash,\n    host: location.host,\n    hostname: location.hostname,\n    pathname: location.pathname,\n    protocol: location.protocol,\n    query: parseQueryString(location.search),\n  }\n}\n\nexport const isSamePage = (url1: string, url2: string) => {\n  const url1Object: ParsedURLProps = parseUrl(url1)\n  const url2Object: ParsedURLProps = parseUrl(url2)\n\n  // Ignore the hash when comparing to see if two pages represent the same resource:\n  return (\n    url1Object.protocol === url2Object.protocol &&\n    url1Object.host === url2Object.host &&\n    url1Object.pathname === url2Object.pathname &&\n    deepEqual(url1Object.query, url2Object.query)\n  )\n}\n","import { MPGenericEvent } from './types'\n\nexport default class EventHandler {\n  handler: Function[]\n\n  constructor() {\n    this.handler = []\n  }\n\n  push(f: Function) {\n    this.handler.push(f)\n  }\n\n  dispatch(e: MPGenericEvent) {\n    const args = Array.prototype.slice.call(arguments, 0)\n    for (let i = 0; i < this.handler.length; i++) {\n      try {\n        this.handler[i].apply(null, args)\n      } catch (e) {\n        console.error(e)\n      }\n    }\n  }\n}\n","import { toObject, toObjectInterface} from './utils'\nimport EventHandler from './handler'\nimport {\n  MPEventForm,\n  MPGenericEvent,\n  MPKeyboardEvent\n} from './types'\n\nexport const getAncestors = (node: any): Element[] => {\n  let cur = node\n  const result = []\n\n  while (cur && cur !== document.body) {\n    result.push(cur)\n    cur = cur.parentNode\n  }\n  return result\n}\n\ninterface datasetInterface {\n  [key: string]: {\n    name: string\n    value: string | number\n  }\n}\n\nexport const getDataset = (node: any) => {\n  if (node.dataset && typeof node.dataset !== 'undefined' && Object.keys(node).length > 0) {\n    return toObject(node.dataset)\n  } else if (node.attributes) {\n    const dataset: datasetInterface = {}\n\n    const attrs = node.attributes\n\n    for (let i = 0; i < attrs.length; i++) {\n      const attrItem = attrs.item(i)\n      const name = attrItem.name\n      const value = attrItem.value\n\n      dataset[`data-${name}`] = {\n        name: name,\n        value: value,\n      }\n    }\n    return dataset\n  } else return {}\n}\n\nexport const genCssSelector = (node: any): string => {\n  let sel = ''\n\n  while (node !== document.body) {\n    let id = node.id\n    let classes = typeof node.className === 'string' ? node.className.trim().split(/\\s+/).join('.') : ''\n    const tagName = node.nodeName.toLowerCase()\n\n    if (id && id !== '') id = '#' + id\n    if (classes !== '') classes = '.' + classes\n\n    const prefix = tagName + id + classes\n\n    const parent = node.parentNode\n\n    let nthchild = 1\n\n    for (let i = 0; i < parent.childNodes.length; i++) {\n      if (parent.childNodes[i] === node) break\n      else {\n        const childTagName = parent.childNodes[i].tagName\n        if (childTagName !== undefined) {\n          nthchild = nthchild + 1\n        }\n      }\n    }\n\n    if (sel !== '') sel = '>' + sel\n\n    sel = prefix + ':nth-child(' + nthchild + ')' + sel\n\n    node = parent\n  }\n  return sel\n}\n\nexport const getNodeDescriptor = (node: any) => {\n  return {\n    id: node.id,\n    selector: genCssSelector(node),\n    title: node.title === '' ? null : node.title,\n    data: getDataset(node),\n  }\n}\n\nexport const simulateMouseEvent = (\n  element: Element | EventTarget,\n  eventName: string,\n  options: toObjectInterface = {},\n) => {\n  const eventMatchers: { [key: string]: RegExp } = {\n    HTMLEvents: /^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,\n    MouseEvents: /^(?:click|dblclick|mouse(?:down|up|over|move|out))$/,\n  }\n\n  const mergedOptions = {\n    pointerX: 0,\n    pointerY: 0,\n    button: 0,\n    ctrlKey: false,\n    altKey: false,\n    shiftKey: false,\n    metaKey: false,\n    bubbles: true,\n    cancelable: true,\n    ...options,\n  }\n\n  let oEvent: Event | null = null\n  let eventType = null\n\n  for (let name in eventMatchers) {\n    if (eventMatchers[name].test(eventName)) {\n      eventType = name\n      break\n    }\n  }\n\n  if (!eventType) {\n    throw new SyntaxError('Only HTMLEvents and MouseEvents interfaces are supported')\n  }\n\n  const evt = eventType === 'HTMLEvents' ? new Event('HTMLEvent') : new MouseEvent('MouseEvent')\n\n  oEvent = {\n    ...evt,\n    ...mergedOptions,\n  }\n\n  try {\n    element.dispatchEvent(oEvent)\n  } catch (e) {\n    // IE nonsense:\n    console.error(e)\n  }\n\n  return element\n}\n\nexport const getFormData = (eventForm: MPEventForm) => {\n  let acc: toObjectInterface = {}\n\n  const setField = (name: string, value: string) => {\n    if (name === '') name = 'anonymous'\n\n    const oldValue = acc[name]\n\n    if (oldValue != null) {\n      if (oldValue instanceof Array) {\n        acc[name].push(value)\n      } else {\n        acc[name] = [oldValue, value]\n      }\n    } else {\n      acc[name] = value\n    }\n  }\n\n  for (let i = 0; i < eventForm.elements.length; i++) {\n    const child = eventForm.elements[i]\n    const nodeType = child.tagName.toLowerCase()\n\n    if (nodeType == 'input' || nodeType == 'textfield') {\n      // INPUT or TEXTFIELD element.\n      // Make sure auto-complete is not turned off for the field:\n      if ((child.getAttribute('autocomplete') || '').toLowerCase() !== 'off') {\n        // Make sure it's not a password:\n        if (child.type !== 'password') {\n          // Make sure it's not a radio or it's a checked radio:\n          if (child.type !== 'radio' || child.checked) {\n            let childKey = ''\n            if (child.name) {\n              childKey = child.name\n            } else if (child.labels && child.labels.length > 0) {\n              childKey = child.labels.join('')\n            } else if (child.id) {\n              childKey = child.id\n            }\n            setField(childKey, child.value)\n          }\n        }\n      }\n    } else if (nodeType == 'select') {\n      // SELECT element:\n      const option = child.options[child.selectedIndex]\n\n      setField(child.name, option.value)\n    }\n  }\n  return { formFields: acc }\n}\n\nexport const monitorElements = (tagName: string, onNew: Function, refresh?: number): void => {\n  refresh = refresh || 50\n\n  const checker = () => {\n    const curElements = document.getElementsByTagName(tagName)\n\n    for (let i = 0; i < curElements.length; i++) {\n      const el = curElements[i]\n\n      const scanned = el.getAttribute('mp_scanned')\n\n      if (!scanned) {\n        el.setAttribute('mp_scanned', 'true')\n        try {\n          onNew(el)\n        } catch (e) {\n          console.error(e)\n        }\n      }\n    }\n    setTimeout(checker, refresh)\n  }\n  setTimeout(checker, 0)\n}\n\nexport const onReady = (f: Function): Function | void => {\n  if (document.body != null) {\n    return f()\n  } else {\n    setTimeout(() => {\n      onReady(f)\n    }, 10)\n  }\n}\n\nexport const onEvent = (el: Element | Window, type: string, capture: boolean | undefined, f_: Function): void => {\n  const fixUp = (f: Function) => (e: Event) => {\n    let retVal\n\n    if (!e.preventDefault) {\n      e.preventDefault = function () {\n        retVal = false\n      }\n    }\n    return f(e) || retVal\n  }\n\n  const f = fixUp(f_)\n\n  if (el.addEventListener) {\n    el.addEventListener(type, f, capture)\n  } else {\n    console.log('No Event listener')\n    // @ts-ignore\n    if (el.attachEvent) {\n      // @ts-ignore\n      el.attachEvent('on' + type, f)\n    }\n  }\n}\n\nexport const onSubmit = (f_: Function): void => {\n  const handler = new EventHandler()\n  onReady(() => {\n    console.log('On Submit Ready')\n    onEvent(document.body, 'submit', true, (e: MPGenericEvent) => {\n      console.log('On Submit Type')\n      handler.dispatch(e)\n    })\n\n    // Intercept enter keypresses which will submit the form in most browsers.\n    onEvent(document.body, 'keypress', false, (e: MPKeyboardEvent) => {\n      console.log('On Keypress Type')\n      if (e.keyCode == 13) {\n        const target = e.target\n        const form: MPEventForm | null = (target && target.form) || null\n\n        if (form) {\n          e.form = form\n          handler.dispatch(e)\n        }\n      }\n    })\n\n    // Intercept clicks on any buttons:\n    onEvent(document.body, 'click', false, (e: MPGenericEvent) => {\n      console.log('On Click Type')\n      const target = e.target\n      const targetType = ((target && target.type) || '').toLowerCase()\n\n      if (target && target.form && (targetType === 'submit' || targetType === 'button')) {\n        e.form = target.form\n        if (e.form?.id) {\n          e.form.formId = e.form.id\n        } else if (e.form.name) {\n          e.form.formId = e.form.name\n        }\n        handler.dispatch(e)\n      }\n    })\n  })\n  handler.push(f_)\n}\n","import { getDiffFromTimestamp, isChildLink, isSamePage, parseLocation, parseUrl, uuidv4 } from './utils'\nimport * as Dom from './dom'\nimport { getFormData } from './dom'\nimport { EventProps, MpUserProps, MPEventType, MPGenericEvent, ScribeEventType } from './types'\n\nconst defaultURLProps = {\n  href: null,\n  hash: null,\n  host: null,\n  hostname: null,\n  pathname: null,\n  protocol: null,\n  query: {},\n}\n\nexport default class EventTracker {\n  apiDomain: string\n  userContext: MpUserProps\n  javascriptRedirect: boolean\n  oldHash: string | null\n  queue: MPEventType[]\n  handlers: Function[]\n\n  constructor(accountSiteId: string | null) {\n    this.apiDomain = 'http://localhost:5000/dev'\n    this.userContext = {\n      accountSiteId: accountSiteId,\n      accountStatus: 'inactive',\n      fingerprint: null,\n      sessionId: null,\n      lastVerified: null,\n      visitorUUID: null,\n      distinctPersonId: null,\n    }\n    this.javascriptRedirect = true\n    this.oldHash = document.location.hash\n    this.queue = []\n    this.handlers = []\n  }\n\n  async init(): Promise<void> {\n    console.debug('MP: Initializing Event Tracker')\n\n    const storageUserContext = this.getStorageContext()\n    this.userContext = {\n      ...this.userContext,\n      ...storageUserContext\n    }\n\n    console.log({ EventTracker: this })\n  }\n\n  initTracking() {\n    // Init Trackers\n    // this.initTrackers()\n\n    // // Load Queue from storage\n    // this.loadQueue()\n    //\n    // // Track pending events in the events Queue\n    // if (this.queue.length > 0) {\n    //   this.trackQueueEvents(this.queue)\n    // }\n  }\n\n  // Context\n  getStorageContext(): MpUserProps | null {\n    const mpStorageContext = localStorage.getItem('mp')\n    if (!mpStorageContext) {\n      return null\n    }\n    return JSON.parse(mpStorageContext)\n  }\n\n  setStorageContext(data: MpUserProps): void {\n    localStorage.setItem('mp', JSON.stringify(data))\n  }\n\n  // Session\n  getStorageSessionId(): string | null {\n    return sessionStorage.getItem('mp_sid')\n  }\n\n  getStorageQueue(): MPEventType[] {\n    const mpEventsQueue = localStorage.getItem('mp_events_queue')\n    return mpEventsQueue ? JSON.parse(mpEventsQueue) : []\n  }\n\n  loadQueue(): void {\n    this.queue = this.getStorageQueue()\n  }\n\n  addToQueue(event: MPEventType): void {\n    this.queue = [...this.queue, event]\n  }\n\n  saveQueue(): void {\n    localStorage.setItem('mp_events_queue', JSON.stringify(this.queue))\n  }\n\n  clearQueue(): void {\n    this.queue = []\n  }\n\n  isAccountActive() {\n    return this.userContext.accountStatus === 'active'\n  }\n\n  async apiRequest(method: string, endpoint: string, body: object) {\n    try {\n      if (!this.userContext?.accountSiteId) {\n        console.warn('MP: Error: Missing ids, cannot track event')\n        return false\n      }\n\n      const jsonBody = JSON.stringify(body)\n      const response = await fetch(endpoint, {\n        method: method,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: jsonBody,\n      })\n      return response.json()\n    } catch (e) {\n      console.error(e)\n      return e\n    }\n  }\n\n  // TRACKERS\n  initTrackers(): void {\n    this.trackClicks()\n    this.trackLinkClicks()\n    this.trackFormSubmits()\n  }\n\n  // Track all clicks to the document\n  trackClicks(): void {\n    Dom.onReady(() =>\n      Dom.onEvent(document.body, 'click', true, async (e: Event) => {\n        const ancestors = Dom.getAncestors(e.target)\n        if (!isChildLink(ancestors)) {\n          await this.track('click', {\n            target: Dom.getNodeDescriptor(e.target),\n          })\n        }\n      }),\n    )\n  }\n\n  // Track all link clicks on the document\n  trackLinkClicks(): void {\n    Dom.monitorElements('a', (el: HTMLLinkElement) =>\n      Dom.onEvent(el, 'click', true, async (e: MouseEvent) => {\n        //return if this click it created with createEvent and not by a real click\n        if (!e.isTrusted) {\n          return\n        }\n\n        const target = e.target\n\n        // TODO: Make sure the link is actually to a pageIdentification.\n        // It's a click, not a Javascript redirect:\n        this.javascriptRedirect = false\n\n        setTimeout(() => {\n          this.javascriptRedirect = true\n        }, 500)\n\n        const parsedUrl = parseUrl(el.href)\n        const value = {\n          target: {\n            url: parsedUrl,\n            ...Dom.getNodeDescriptor(target),\n          },\n        }\n\n        if (isSamePage(parsedUrl.href, document.location.href)) {\n          console.log('User is jumping around the same pageIdentification')\n          // User is jumping around the same pageIdentification. Track here in case the\n          // client prevents the default action and the hash doesn't change\n          // (otherwise it would be tracked by onhashchange):\n          this.oldHash = null\n\n          // trackJump(document.location.hash);\n        } else if (parsedUrl.hostname === document.location.hostname) {\n          // We are linking to a pageIdentification on the same site. There's no need to send\n          // the event now, we can safely send it later:\n          console.log('We are linking to a pageIdentification on the same site.')\n          await this.trackLater('click', value)\n        } else {\n          e.preventDefault()\n          console.log('We are linking to a pageIdentification that is not on this site.')\n          // We are linking to a pageIdentification that is not on this site. So we first\n          // wait to send the event before simulating a different click\n          // on the link. This ensures we don't lose the event if the user\n          // does not return to this site ever again.\n          await this.track('click', value, () => {\n            // It's a click, not a Javascript redirect:\n            this.javascriptRedirect = false\n\n            if (target) {\n              // Simulate a click to the original element if we were waiting on the tracker:\n              Dom.simulateMouseEvent(target, 'click')\n            }\n          })\n        }\n      }),\n    )\n  }\n\n  // Track all form submissions\n  trackFormSubmits(): void {\n    Dom.onSubmit(async (e: MPGenericEvent) => {\n      if (e.form) {\n        if (!e.form.id) {\n          e.form.id = uuidv4()\n        }\n\n        await this.trackLater('form_submit', {\n          form: {\n            ...getFormData(e.form),\n            formId: e.form.id,\n          },\n        })\n      }\n    })\n  }\n\n  createEvent(eventType: string, properties: EventProps): MPEventType {\n    console.log({ eventType, properties })\n    return {\n      eventType,\n      timestamp: new Date().toISOString(),\n      source: {\n        url: parseLocation(document.location),\n      },\n      target: {\n        url: defaultURLProps,\n      },\n      ...properties,\n    }\n  }\n\n  /**\n   * @function: track\n   * @param {String} [eventName] A string that identifies an event. Ex. \"Sign Up\"\n   * @param {Object} [properties] A set of properties to include with the event you're sending.\n   * @param {Function} [callback] A string that identifies an event. Ex. \"Sign Up\"\n   * These describe the details about the visitor and/or event.\n   * @description: track a visitor and/or event details\n   */\n  async track(eventName: string, properties: object, callback?: Function): Promise<boolean> {\n    console.log('Tracking Event: ', { eventName, properties })\n    try {\n      const eventProps = {\n        ...this.userContext,\n        ...properties,\n      }\n      const mpEvent = this.createEvent(eventName, eventProps)\n\n      console.log('Customer Tracking Event: ', { mpEvent })\n      await this.apiRequest('POST', `${this.apiDomain}/event/collection`, mpEvent)\n      return true\n    } catch (e) {\n      console.error('MP: Error trying to track event.')\n      return false\n    }\n  }\n\n  /**\n   * @function: trackScribeEvent\n   * @param {ScribeEventType} [scribeEvent] A scribe-analytics event object\n   * @description: internal method to track a visitor and/or event details via scribe-analytics\n   */\n\n  async trackScribeEvent(scribeEvent: ScribeEventType): Promise<boolean> {\n    try {\n      const event = scribeEvent.value\n\n      let accountEvent = {\n        ...event,\n        type: event.event,\n        ...this.userContext,\n      }\n\n      console.log({ scribeAccountEvent: accountEvent })\n      const response = await this.apiRequest('POST', `${this.apiDomain}/event/collection`, accountEvent)\n      if (response.status === '403') {\n        console.warn('MP: Unauthorized')\n        // TODO: Invalidate local storage data\n        return false\n      }\n      return true\n    } catch (e) {\n      console.error('MP: Error sending scribe-analytics event to MP server.')\n      // TODO: Retry or invalidate local storage data\n      return false\n    }\n  }\n\n  /**\n   * @function: trackLater\n   * @param {String} eventName A string that identifies an event. Ex. \"Sign Up\"\n   * @param {Object | null} properties A key/pair object of custom event properties\n   * @description: track a visitor and/or event details at a later time\n   */\n  async trackLater(eventName: string, properties: object | null): Promise<boolean> {\n    try {\n      const eventProps = {\n        ...this.userContext,\n        ...properties,\n      }\n      const mpEvent = this.createEvent(eventName, eventProps)\n      this.addToQueue(mpEvent)\n      this.saveQueue()\n      return true\n    } catch (e) {\n      console.error('MP: Error trying to track event.')\n      return false\n    }\n  }\n\n  /**\n   * @function: trackQueueEvents\n   * @param {MPEventType[]} [events] A string that identifies an event. Ex. \"Sign Up\"\n   * @description: track a visitor and/or event details\n   */\n  trackQueueEvents(events: MPEventType[]): boolean {\n    console.log('Track Queue Event')\n    try {\n      events.forEach(async (event: MPEventType) => {\n        console.log({ event })\n        const eventType = event.eventType\n        // Specially modify redirect, formSubmit events to save the new URL,\n        // because the URL is not known at the time of the event:\n        if (['redirect', 'formSubmit'].includes(eventType)) {\n          event.target = {\n            ...event.target,\n            url: parseLocation(document.location),\n          }\n        }\n\n        // If source and target urls are the same, change redirect events\n        // to reload events:\n        if (eventType === 'redirect') {\n          try {\n            // See if it's a redirect (= different url) or reload (= same url):\n            const sourceUrl = event.source.url.href\n            const targetUrl = event.target.url.href\n\n            if (sourceUrl === targetUrl) {\n              // it's a page reload:\n              event.eventType = 'reload'\n            }\n          } catch (e) {\n            console.error(e)\n          }\n        }\n        console.log({ eventType, event })\n        // const response = await this.apiRequest('POST', `${this.apiDomain}/event/collection`, event)\n      })\n      // this.clearQueue()\n      // this.saveQueue()\n      return true\n    } catch (e) {\n      console.error('MP: Error trying to track event.')\n      return false\n    }\n  }\n\n  /**\n   * @function: identify\n   * @param {String} [distinctUserId] A string that uniquely identifies a visitor.\n   * @description: Identify a visitor with a unique ID to track their events and create a person.\n   * By default, unique visitors are tracked using a UUID generated the first time they visit the site.\n   * Should be called when you know the identity of the current visitor (i.e. login or signup).\n   */\n  async identify(distinctUserId: string): Promise<boolean> {\n    try {\n      // const body = {\n      //   accountSiteId: this.userContext?.accountSiteId,\n      //   distinctUserId: distinctUserId,\n      //   userId: this.userContext?.userId,\n      // }\n      // await this.apiRequest('POST', `${this.apiDomain}/identify`, body)\n      this.userContext.distinctPersonId = distinctUserId\n      this.setStorageContext(this.userContext)\n      return true\n    } catch (e) {\n      console.error('MP: Error trying to identify user.')\n      return false\n    }\n  }\n\n  /**\n   * @function: authenticateAccountId\n   * @description: Will call api to verify the account status based on the host id provided in script.\n   * Will update the MP class object data and local/session storage on successful response.\n   */\n  async authenticateAccountId(): Promise<boolean> {\n    if (this.userContext.accountSiteId) {\n      try {\n        const authBody = {\n          accountSiteId: this.userContext.accountSiteId,\n        }\n\n        const response = await this.apiRequest('POST', `${this.apiDomain}/authentication`, authBody)\n\n        const mpContext = {\n          ...this.userContext,\n          accountSiteId: this.userContext.accountSiteId,\n          accountStatus: response.accountStatus,\n          lastVerified: Date.now(),\n        }\n\n        if (mpContext.accountStatus === 'active') {\n          this.userContext = mpContext\n          this.setStorageContext(mpContext)\n          return true\n        }\n        return false\n      } catch (e) {\n        console.error('MP: Error verifying account.')\n        return false\n      }\n    }\n    return false\n  }\n\n  /**\n   * @function: authenticateHostData\n   * @description: Verify local storage and MP class object data.\n   * Will check local storage for MP data, and determine if the account\n   * is valid through a series of checks on the MP class object around the\n   * account id, status, and the last time it was verified\n   */\n\n  async authenticateHostData(mpStorageContext: MpUserProps): Promise<boolean> {\n    try {\n      // If no mpData kill it\n      if (!this.userContext) {\n        return false\n      }\n\n      // If account site ids don't match, re-authenticate and update any stale data\n      if (this.userContext.accountSiteId !== mpStorageContext.accountSiteId) {\n        return await this.authenticateAccountId()\n      }\n\n      const { lastVerified, accountStatus } = mpStorageContext\n      const now = new Date().getTime()\n      const lastVerifiedTimeStamp = lastVerified || new Date().getTime()\n      const lastVerifiedHours = getDiffFromTimestamp(now, lastVerifiedTimeStamp, 'hours')\n\n      // If account is inactive, kill it for 24 hours before trying to re-authenticate again\n      // TODO: Add logic for delinquent once Stripe implemented\n      if (accountStatus === 'inactive' || accountStatus === 'delinquent') {\n        if (lastVerifiedHours < 1) {\n          return false\n        } else {\n          return await this.authenticateAccountId()\n        }\n      }\n\n      // TODO: DO we want to add a way to prevent and future calls for an account?\n\n      // If account is active but hasn't been verified for over an hour, re-authenticate again\n      if (accountStatus === 'active') {\n        if (lastVerifiedHours >= 1) {\n          console.debug(`MP: Re-authenticating account id ${this.userContext.accountSiteId}`)\n          return await this.authenticateAccountId()\n        } else {\n          this.userContext = {\n            ...this.userContext,\n            ...mpStorageContext,\n          }\n          return true\n        }\n      }\n      return false\n    } catch (e) {\n      console.error(e)\n      return false\n    }\n  }\n\n  /**\n   * @function: authenticateAccount\n   * @description: The authenticateAccount function will authenticate an account\n   * based on either host id provided in script or existing local and session storage data\n   */\n  async authenticateAccount(): Promise<boolean> {\n    const mpStorageContext = this.getStorageContext()\n    console.log({ mpStorageContext })\n\n    if (mpStorageContext) {\n      console.debug(`MP: Authenticating host storage data for account site id ${this.userContext.accountSiteId}`)\n      return await this.authenticateHostData(mpStorageContext)\n    } else {\n      // console.debug(`MP: Authenticating host storage data for account site id ${this.userContext.accountSiteId}`)\n      // return await this.authenticateHostData(mpStorageContext)\n      return false\n    }\n  }\n}\n","import { getSiteId } from './utils'\nimport EventTracker from './eventTracker'\n\nconst script = document.currentScript\n\n/**\n * @function: init\n * @description: When page is ready, validates script and account status\n * before loading scribe-analytics tracking and page identification services\n */\nasync function init() {\n\n  // Get site id from script for validation\n  const siteId = getSiteId(script)\n  if (!siteId) {\n    console.error('MP: Error verifying account. No site id provided')\n    return false\n  }\n\n  // Create new MP class and add to window\n  const eventTracker = new EventTracker(siteId)\n  window.MP_EVENT_TRACKER = eventTracker\n\n  // Initialize MP class\n  await eventTracker.init()\n\n  // Check if account is active\n  const accountIsActive = eventTracker.isAccountActive()\n  if (accountIsActive) {\n    console.debug('MP: Account is active.')\n\n    // Initialize MP class\n    await eventTracker.initTracking()\n\n    // create a new script element\n    const newScript = document.createElement('script')\n    newScript.src = `http://localhost:8082/scribe-analytics-debug.js?hid=${siteId}`\n    newScript.async = true\n\n    // insert the scribe-analytics script element into doc\n    document.head.appendChild(newScript)\n\n  } else {\n    console.error(`MP: Account is not active for site id ${siteId}.`)\n  }\n}\n\n// Wait until all elements are on the pageIdentification from initial load\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', init)\n} else {\n  init().then(() => 'Successfully initiated Magic Pixel')\n}\n"],"names":["Dom.onReady","Dom.onEvent","Dom.getAncestors","Dom.getNodeDescriptor","Dom.monitorElements","Dom.simulateMouseEvent","Dom.onSubmit"],"mappings":"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"}